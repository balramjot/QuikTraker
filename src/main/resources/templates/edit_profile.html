<!DOCTYPE html>
<html xmlns:sec="http://www.thymeleaf.org/extras/spring-security" xmlns:th="http://www.thymeleaf.org" xmlns:tiles="http://www.thymeleaf.org" lang="en">

<!-------------- head --------------->
<head th:replace="fragments/head :: head"></head>

<body>

    <!-------------- header --------------->
    <header th:replace="fragments/header :: header"></header>

    <!-------------- main container --------------->
    <div class="col-lg-12">
        <div class="row">
            <div class="page-wrapper toggled">
                
				<div th:replace="fragments/leftbar :: leftbar"></div>
				
                <!-- content div -->
                <main class="page-content">
                    <div class="col-md-12">
                        <div class="container-fluid">
                            <h2>Edit Your Profile</h2>
                            <hr style="margin:0px; border-bottom: none;">
                                <div class="clear ht-40"></div>
                            <div class="row new-row-div">
                             		<!-------------- success message on user creation --------------->
                			
			                	<div th:if="${message}" th:class="${'alert ' + swapClass}" role="alert">
								  <strong th:text="${message}"></strong>
								</div>
										<!-------------- error message on user creation --------------->
										
			                	
								<div th:each="erm : ${errorMessage}">
									<div th:if="${erm}" class="alert alert-danger" role="alert">
									  <strong th:text="${erm}"></strong>
									</div>
								</div>
								
                               <div class="form-bg-color" style="height: 755px;">
                             	   <form method="POST" id="upload-profile-picture" enctype="multipart-form-data">
                             		 	<div class="col-sm-2" style="padding: 0px;">
                                            <div class="form-group" style="float: left">
	                                     		<label for="phoneNo">Profile Picture</label>
	                                     		<br/>
			                                    <div class="new-file-upload-div file btn btn-lg btn-primary">
													<img th:src="${userInfo.profilePic eq '' or userInfo.profilePic eq null} ? '/images/dummyUser.jpg' : @{'/uploaded_images/'+${userInfo.profilePic}}" style="width:120px; height: 120px"/>													
													<input type="file" name="picture" id="picture" class="new-file-upload-button" style="height: 140px;"/>
												</div>
											</div>
											<div class="form-group" style="float: left; margin-top: 33px; margin-left: 10px;">
												<button type="button" class="btn btn-warning" id="fileUploadBtn" title="upload" style="display:none;"><i class="fa fa-upload"></i></button>
											</div>
												<div class="clear"></div>
	                                    </div>
	                                    <div class="col-sm-6">
	                                    	<div id="output" class="alert" role="alert"></div>
	                                    		<div class="clear"></div>
	                                    	<label>Email:</label>&nbsp;&nbsp;&nbsp;<span th:text="${userInfo.user.email}"></span>
	                                    		<div class="clear"></div>
	                                    	<label>Joined On:</label>&nbsp;&nbsp;&nbsp;<span th:text="${userCreateDate}"></span>
	                                    </div>
	                                    <div class="col-sm-4">
	                                        <div class="alert alert-info" role="alert">
	                                            <h4 class="alert-heading">Upload your profile picture</h4>
	                                            <ul style="padding-left: 15px;">
	                                                <li>Click on picture</li>
	                                                <li>Select the picture you want to upload</li>
	                                                <li>Click on <strong>Upload</strong> button</li>
	                                                <li>Save your changes by clicking on <strong>Update</strong> button</li>
	                                            </ul>
	                                        </div>
	                                    </div>
                             	   </form>
                             	   		<div class="clear"></div>
                             	   	<hr style="margin:0px; border-bottom: none; border-color: #8C8888" class="ht-30">
	                               <form th:action="@{/profile/updateUser}" method="POST" id="edit-profile-form">
	                                   <div class="col-sm-6" style="padding: 0px;">
                                            <div class="form-group">
                                                <label for="firstName">First Name</label>
                                                <input type="text" class="form-control new-form-inputs" th:field="${userInfo.user.firstName}" name="firstName" id="firstName"
                                                placeholder="John" required>
                                            </div>
	                                    </div>
	                                    
	                                    <div class="col-sm-6" style="padding-right: 0px;">
	                                       <div class="form-group">
                                                <label for="lastName">Last Name</label>
                                                <input type="text" class="form-control new-form-inputs" th:field="${userInfo.user.lastName}" name="lastName" id="lastName"
                                                placeholder="Doe">
                                            </div>
	                                    </div>
	                                    	<div class="clear"></div>
	                                    <div class="col-sm-12" style="padding: 0px;">
	                                       <div class="form-group">
                                                <label for="lastName">Address</label>
                                                <textarea rows="5" class="form-control new-form-textarea" th:field="${userInfo.address}" name="address" id="address"
                                                placeholder="001 Main Street, Kent"></textarea>
                                            </div>
	                                    </div>	
	                                    		<div class="clear"></div>
	                                    <div class="col-sm-6" style="padding: 0px;">
                                            <div class="form-group">
                                                <label for="city">City</label>
                                                <input type="text" class="form-control new-form-inputs" th:field="${userInfo.city}" name="city" id="city"
                                                placeholder="Boston">
                                            </div>
	                                    </div>
	                                    <div class="col-sm-6" style="padding-right: 0px;">
	                                       <div class="form-group">
                                                <label for="province">Province</label>
                                                <input type="text" class="form-control new-form-inputs" th:field="${userInfo.province}" name="province" id="province"
                                                placeholder="NY">
                                            </div>
	                                    </div>
	                                    	<div class="clear"></div>
	                                    <div class="col-sm-6" style="padding: 0px;">
	                                       <div class="form-group">
                                                <label for="zipcode">Zipcode</label>
                                                <input type="text" class="form-control new-form-inputs" th:field="${userInfo.zipcode}" name="zipcode" id="zipcode"
                                                placeholder="12345">
                                            </div>
	                                    </div>
	                                    <div class="col-sm-6" style="padding-right: 0px;">
	                                       <div class="form-group">
                                                <label for="phoneNo">Phone Number</label>
                                                <input type="text" class="form-control new-form-inputs" th:field="${userInfo.phoneNo}" name="phoneNo" id="phoneNo"
                                                placeholder="1234567890">
                                            </div>
	                                    </div>
	                                    	<input type="hidden" th:field="${userInfo.profilePic}" name="profilePic" id="profilePic">
	                                    	
	                                    	

	                                    	
	                                    	<div class="clear"></div>
	                                    <button type="submit" class="btn btn-success">Update</button>
                                    </form>
                                        <div class="clear ht-30"></div>
                                </div> 
                               
                            </div>
                        </div>
                    </div>
                </main>
            </div>
            
        </div>
        <!------------ Footer ------------>
        <footer th:replace="fragments/footer :: footer"></footer>
    </div>
    <!------------ Javascript and jQuery files ------------>
    <script src="/js/jquery-3.5.1.min.js"></script>
    <script src="/js/jquery.validate.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/wow.min.js"></script>
    <script src="/js/customScript.js" defer></script>
    <script src="/js/validation.js" defer></script>
</body>

</html>